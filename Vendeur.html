<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Espace Vendeur</title>
<style>
body { font-family: Arial; background:#f4f4f4; padding:20px; }
.box { background:white; padding:20px; border-radius:10px; max-width:500px; margin:auto; }
input, textarea, select, button { width:100%; padding:10px; margin-top:10px; }
button { background:#28a745; color:white; border:none; font-size:16px; cursor:pointer; }
img { width:100%; margin-top:10px; border-radius:8px; }
</style>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
</head>
<body>

<div class="box">
  <h2>Ajouter un produit</h2>

  <input type="text" id="vendeurNom" placeholder="Nom du vendeur" />
  <input type="text" id="nomProduit" placeholder="Nom du produit" />
  <input type="number" id="prixProduit" placeholder="Prix (GNF)" />
  <textarea id="descriptionProduit" placeholder="Description du produit"></textarea>
  <input type="file" id="imageProduit" accept="image/*" />

  <select id="villeSelect">
    <option value="">Choisir une ville</option>
    <option>Conakry</option><option>Boké</option><option>Fria</option><option>Gaoual</option>
    <option>Telimélé</option><option>Kindia</option><option>Forécariah</option><option>Labe</option>
    <option>Lélouma</option><option>Dalaba</option><option>Pita</option><option>Koubia</option>
    <option>Kankan</option><option>Kouroussa</option><option>Siguiri</option><option>Mandiana</option>
    <option>Kerouané</option><option>Faranah</option><option>Dabola</option><option>Dinguiraye</option>
    <option>Macenta</option><option>Nzérékoré</option><option>Yomou</option><option>Guéckédou</option>
    <option>Lola</option><option>Beyla</option><option>Kissidougou</option><option>Forecariah</option>
    <option>Boffa</option><option>Boké</option>
  </select>

  <select id="modePaiement">
    <option value="">Mode de paiement</option>
    <option>Orange Money +224625216110</option>
    <option>Mobile Money +224660452333</option>
  </select>

  <button onclick="ajouterProduit()">Publier le produit</button>
  <p id="message"></p>
</div>

<script>
const firebaseConfig = {
  apiKey: "TA_CLE_API",
  authDomain: "TON_PROJET.firebaseapp.com",
  projectId: "TON_PROJET",
  storageBucket: "TON_PROJET.appspot.com",
  messagingSenderId: "XXXX",
  appId: "XXXX"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const cloudName = "TON_CLOUD_NAME";
const uploadPreset = "TON_UPLOAD_PRESET";

async function ajouterProduit() {
  const vendeur = document.getElementById("vendeurNom").value;
  const nom = document.getElementById("nomProduit").value;
  const prix = document.getElementById("prixProduit").value;
  const description = document.getElementById("descriptionProduit").value;
  const ville = document.getElementById("villeSelect").value;
  const mode = document.getElementById("modePaiement").value;
  const imageFile = document.getElementById("imageProduit").files[0];

  if (!vendeur || !nom || !prix || !description || !ville || !mode || !imageFile) {
    alert("Remplis tous les champs");
    return;
  }

  document.getElementById("message").innerText = "Upload de l'image...";

  const formData = new FormData();
  formData.append("file", imageFile);
  formData.append("upload_preset", uploadPreset);

  try {
    const res = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
      method: "POST",
      body: formData
    });
    const data = await res.json();
    const imageUrl = data.secure_url;

    await db.collection("produits").add({
      vendeur, nom, prix, description, ville, mode, image: imageUrl, date: new Date()
    });

    document.getElementById("message").innerText = "Produit publié ✅";

  } catch (err) {
    alert("Erreur : " + err);
  }
}
</script>

</body>
  </html>
