<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>E-commerce Papasta</title>
<style>
body{font-family:Arial;background:#ff0000;color:#fff;padding:20px}
section{display:none;margin-top:150px}
button{padding:8px 12px;background:#800000;color:white;border:none}
input,select,textarea{width:100%;padding:8px;margin-bottom:10px}
.produit{background:#ff6666;margin:10px;padding:10px;width:200px;display:inline-block;text-align:center}
.produit img{width:150px;height:150px;object-fit:cover}
.note{background:#990000;padding:10px;margin-top:10px;font-size:14px}
nav{position:fixed;top:60px;left:10px}
#menu-list{display:none;background:#cc0000;padding:10px}
</style>
</head>
<body>

<nav>
<button onclick="toggleMenu()">☰ Menu</button>
<ul id="menu-list">
<li onclick="showSection('produits')">Produits</li>
<li onclick="showSection('panier')">Panier</li>
<li onclick="showSection('loginVendeur')">Espace Vendeur</li>
<li onclick="showSection('loginAcheteur')">Espace Acheteur</li>
<li onclick="showSection('adminLogin')">Admin</li>
</ul>
</nav>

<section id="produits" style="display:block">
<h2>Produits</h2>
<div id="produits-container"></div>
</section>

<section id="panier">
<h2>Commande</h2>
<div id="panier-container"></div>

<form id="commandeForm">
<input type="text" id="clientNumero" placeholder="Votre numéro" required>

<h3>Receveur</h3>
<input type="text" id="receveurNom" placeholder="Nom du receveur" required>
<input type="text" id="receveurNumero" placeholder="Numéro du receveur" required>

<select id="villeLivraison" required></select>

<select id="paiement" required>
<option value="">Moyen de paiement</option>
<option>Orange Money +224625216110</option>
<option>Mobile Money +224625216110</option>
</select>

<button type="submit">Valider la commande</button>

<div class="note">
Après paiement, envoyez la capture d’écran du dépôt sur WhatsApp pour accélérer la confirmation.
</div>
</form>
</section>

<section id="loginVendeur">
<h2>Inscription / Connexion Vendeur</h2>
<form id="vendeurForm">
<input type="text" id="vNom" placeholder="Nom" required>
<input type="text" id="vNumero" placeholder="Numéro" required>
<input type="password" id="vPass" placeholder="Mot de passe" required>
<select id="vVille"></select>
<button type="submit">Valider</button>
</form>

<div id="ajoutProduit" style="display:none">
<h3>Ajouter Produit</h3>
<form id="formProduit">
<input type="text" id="nomProduit" placeholder="Nom produit" required>
<input type="number" id="prixProduit" placeholder="Prix" required>
<input type="file" id="imageProduit" required>
<button type="submit">Ajouter</button>
</form>
</div>
</section>

<section id="loginAcheteur">
<h2>Inscription Acheteur</h2>
<form id="acheteurForm">
<input type="text" placeholder="Numéro" required>
<input type="password" placeholder="Mot de passe" required>
<button>Enregistrer</button>
</form>
</section>

<section id="adminLogin">
<h2>Connexion Admin</h2>
<input type="text" id="adminUser" placeholder="Adresse">
<input type="password" id="adminPass" placeholder="Mot de passe">
<button onclick="loginAdmin()">Connexion</button>
</section>

<section id="adminPanel">
<h2>Commandes Reçues</h2>
<div id="adminCommandes"></div>
</section>

<script>
const villes=["Conakry","Kindia","Labé","Mamou","Kankan","Nzérékoré"];
villeLivraison.innerHTML=villes.map(v=>`<option>${v}</option>`).join("");
vVille.innerHTML=villes.map(v=>`<option>${v}</option>`).join("");

function toggleMenu(){
menu-list.style.display=menu-list.style.display==="block"?"none":"block";
}
function showSection(id){
document.querySelectorAll("section").forEach(s=>s.style.display="none");
document.getElementById(id).style.display="block";
if(id==="adminPanel") afficherCommandes();
}

let produits=JSON.parse(localStorage.getItem("produits"))||[];
let panier=JSON.parse(localStorage.getItem("panier"))||[];
let commandes=JSON.parse(localStorage.getItem("commandes"))||[];
let vendeurActif=null;

function afficherProduits(){
produits-container.innerHTML="";
produits.forEach((p,i)=>{
produits-container.innerHTML+=`<div class="produit">
<img src="${p.image}">
<h4>${p.nom}</h4>
<p>${p.prix} FG</p>
<button onclick="ajouterPanier(${i})">Ajouter</button>
</div>`;
});
}
afficherProduits();

function ajouterPanier(i){
panier.push(produits[i]);
localStorage.setItem("panier",JSON.stringify(panier));
panier-container.innerHTML=panier.map(p=>`<p>${p.nom}</p>`).join("");
showSection("panier");
}

vendeurForm.onsubmit=e=>{
e.preventDefault();
vendeurActif={nom:vNom.value,numero:vNumero.value,ville:vVille.value};
ajoutProduit.style.display="block";
alert("Vendeur connecté");
};

formProduit.onsubmit=e=>{
e.preventDefault();
let reader=new FileReader();
reader.onload=evt=>{
produits.push({nom:nomProduit.value,prix:prixProduit.value,image:evt.target.result,vendeur:vendeurActif.nom});
localStorage.setItem("produits",JSON.stringify(produits));
afficherProduits();
};
reader.readAsDataURL(imageProduit.files[0]);
};

commandeForm.onsubmit=e=>{
e.preventDefault();
commandes.push({
clientNumero:clientNumero.value,
receveurNom:receveurNom.value,
receveurNumero:receveurNumero.value,
ville:villeLivraison.value,
paiement:paiement.value,
produits:panier
});
localStorage.setItem("commandes",JSON.stringify(commandes));
alert("Commande envoyée !");
panier=[];
localStorage.removeItem("panier");
};

function loginAdmin(){
if(adminUser.value==="papasta" && adminPass.value==="papasta3494"){
showSection("adminPanel");
}else alert("Accès refusé");
}

function afficherCommandes(){
adminCommandes.innerHTML="";
commandes.forEach((c,i)=>{
adminCommandes.innerHTML+=`
<div style="background:#660000;padding:10px;margin-bottom:10px">
<h4>Commande ${i+1}</h4>
<p><b>Client:</b> ${c.clientNumero}</p>
<p><b>Receveur:</b> ${c.receveurNom} (${c.receveurNumero})</p>
<p><b>Ville:</b> ${c.ville}</p>
<p><b>Paiement:</b> ${c.paiement}</p>
<ul>${c.produits.map(p=>`<li>${p.nom} - Vendeur: ${p.vendeur}</li>`).join("")}</ul>
</div>`;
});
}
</script>
</body>
  </html>
