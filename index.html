<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Site E-commerce</title>

<style>
body{
font-family:Arial;
padding:20px;
background:#0f5f2f;
color:white;
font-size:18px;
}

h2,h3,h4{font-size:22px}

nav{
position:fixed;
top:20px;
left:20px;
z-index:1000;
}

nav button{
font-size:22px;
padding:12px 18px;
}

#menu-list{
display:none;
background:#0b7a3b;
padding:20px;
font-size:20px;
border-radius:10px;
width:250px;
}

#menu-list li{
margin:15px 0;
cursor:pointer;
list-style:none;
}

section{margin-top:170px; display:none;}

.produit{
background:#16a34a;
padding:10px;
margin:10px;
width:220px;
display:inline-block;
text-align:center;
border-radius:10px;
}

.produit img{
width:160px;
height:160px;
object-fit:cover;
}

button{
padding:10px 15px;
margin:6px 0;
background:#065f2c;
color:white;
border:none;
border-radius:10px;
cursor:pointer;
font-weight:bold;
box-shadow:0 6px 0 #043d1c;
transition:all 0.1s ease;
}

button:active{
transform:translateY(6px);
box-shadow:0 0 0 #043d1c;
}

input,select,textarea{
width:100%;
padding:8px;
margin-bottom:10px;
font-size:16px;
border-radius:8px;
border:none;
}

.badge{
background:red;
padding:4px 8px;
border-radius:50%;
font-size:14px;
}
</style>
</head>

<body>

<nav>
<button onclick="toggleMenu()">☰ Menu <span id="compteur" class="badge">0</span></button>
<ul id="menu-list">
<li onclick="showSection('produits')">Produits</li>
<li onclick="showSection('vendeur')">Vendeur</li>
<li onclick="showSection('panier')">Panier</li>
<li onclick="loginAdmin()">Admin</li>
<li onclick="toggleMenu()">Fermer</li>
</ul>
</nav>

<section id="produits" style="display:block">
<h2>Produits</h2>
<div id="produits-container"></div>
</section>

<section id="panier">
<h2>Panier</h2>
<div id="panier-container"></div>
<h3>Total : <span id="total">0</span> FG</h3>
<h3>Livraison (8%) : <span id="livraison">0</span> FG</h3>
<h3>Total Général : <span id="totalGeneral">0</span> FG</h3>

<form id="commandeForm">
<input type="text" id="clientNom" placeholder="Nom client" required>
<input type="text" id="clientTel" placeholder="Numéro client" required>
<input type="password" id="clientPass" placeholder="Mot de passe" required>

<input type="text" id="receveurNom" placeholder="Nom receveur" required>
<input type="text" id="receveurTel" placeholder="Téléphone receveur" required>

<select id="ville" required>
<option>Conakry</option>
<option>Kindia</option>
<option>Labé</option>
<option>Kankan</option>
<option>Nzérékoré</option>
</select>

<div style="background:#065f2c;padding:10px;border-radius:10px;">
<p>Orange Money : +224625216110</p>
<p>Mobile Money : +224660452333</p>
<p>Envoyez la capture WhatsApp au 625216110</p>
</div>

<button type="submit">Valider la commande</button>
</form>
</section>

<section id="vendeur">
<h3>Inscription Vendeur</h3>
<form id="vendeurForm">
<input type="text" id="vendeurNom" placeholder="Nom vendeur" required>
<input type="text" id="vendeurTel" placeholder="Numéro vendeur" required>
<input type="password" id="vendeurPass" placeholder="Mot de passe" required>
<button type="submit">Valider</button>
</form>

<div id="ajoutProduit" style="display:none">
<h3>Ajouter Produit</h3>
<form id="formProduit">
<input type="text" id="nomProduit" placeholder="Nom produit" required>
<input type="number" id="prixProduit" placeholder="Prix" required>
<input type="number" id="stockProduit" placeholder="Stock" required>
<input type="file" id="imageProduit" required>
<button type="submit">Ajouter</button>
</form>
</div>
</section>

<section id="admin">
<h2>Commandes Admin</h2>
<div id="admin-container"></div>
</section>

<script>
let produits=JSON.parse(localStorage.getItem("produits"))||[];
let panier=JSON.parse(localStorage.getItem("panier"))||[];
let commandes=JSON.parse(localStorage.getItem("commandes"))||[];

function toggleMenu(){
let m=document.getElementById("menu-list");
m.style.display=m.style.display==="block"?"none":"block";
}

function showSection(id){
document.querySelectorAll("section").forEach(s=>s.style.display="none");
document.getElementById(id).style.display="block";
afficherPanier();
}

function afficherProduits(){
let c=document.getElementById("produits-container");
c.innerHTML="";
produits.forEach((p,i)=>{
c.innerHTML+=`
<div class="produit">
<img src="${p.image}">
<h4>${p.nom}</h4>
<p>${p.prix} FG</p>
<p>Stock: ${p.stock}</p>
<button onclick="ajouter(${i})">Ajouter</button>
</div>`;
});
}
afficherProduits();

function ajouter(i){
if(produits[i].stock<=0){alert("Rupture de stock");return;}
panier.push({...produits[i],quantite:1});
produits[i].stock--;
localStorage.setItem("produits",JSON.stringify(produits));
localStorage.setItem("panier",JSON.stringify(panier));
afficherProduits();
afficherPanier();
}

function afficherPanier(){
let c=document.getElementById("panier-container");
let total=0;
c.innerHTML="";
panier.forEach((p,index)=>{
total+=p.prix;
c.innerHTML+=`
<p>${p.nom} - ${p.prix} FG 
<button onclick="supprimer(${index})">Supprimer</button></p>`;
});
let livraison=total*0.08;
document.getElementById("total").innerText=total;
document.getElementById("livraison").innerText=livraison;
document.getElementById("totalGeneral").innerText=total+livraison;
document.getElementById("compteur").innerText=panier.length;
}

function supprimer(i){
panier.splice(i,1);
localStorage.setItem("panier",JSON.stringify(panier));
afficherPanier();
}

document.getElementById("formProduit").onsubmit=e=>{
e.preventDefault();
let reader=new FileReader();
reader.onload=ev=>{
produits.push({
nom:nomProduit.value,
prix:parseInt(prixProduit.value),
stock:parseInt(stockProduit.value),
image:ev.target.result
});
localStorage.setItem("produits",JSON.stringify(produits));
afficherProduits();
};
reader.readAsDataURL(imageProduit.files[0]);
};

document.getElementById("commandeForm").onsubmit=e=>{
e.preventDefault();
commandes.push({
client:clientNom.value,
produits:[...panier]
});
localStorage.setItem("commandes",JSON.stringify(commandes));
alert("Commande envoyée");
panier=[];
localStorage.removeItem("panier");
afficherPanier();
};

function loginAdmin(){
let u=prompt("Nom admin");
let p=prompt("Mot de passe");
if(u==="papasta" && p==="papasta3494"){
showSection("admin");
let c=document.getElementById("admin-container");
c.innerHTML="";
commandes.forEach((cmd,i)=>{
c.innerHTML+=`<div style="background:#065f2c;padding:10px;margin:10px;">
<h4>Commande ${i+1}</h4>
${cmd.produits.map(p=>`<p>${p.nom} - ${p.prix} FG</p>`).join("")}
</div>`;
});
}else alert("Accès refusé");
}
</script>

</body>
</html>
