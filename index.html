<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Papasta Market</title>

<style>
body{font-family:Arial;background:#ff0000;color:white;margin:0}
header{background:#800000;padding:20px;text-align:center;font-size:26px;font-weight:bold}
nav{position:fixed;top:100px;left:10px;z-index:1000}
#menuBtn{font-size:28px;padding:18px 24px}
#menu{display:none;background:#cc0000;padding:25px;width:380px;border-radius:12px}
#menu button{width:100%;padding:20px;font-size:20px;margin-bottom:18px;border-radius:10px;background:#800000;color:white;border:none}
section{display:none;padding:20px;margin-top:120px}

/* üîπ PANIER CENTR√â */
#panier{
max-width:600px;
margin:140px auto;
background:#cc0000;
border-radius:12px;
}

/* üîπ COMPTEUR PANIER */
#panierCount{
background:green;
padding:4px 10px;
border-radius:50%;
font-weight:bold;
margin-left:8px;
}

.produit{background:#ff6666;padding:12px;margin:10px;width:210px;display:inline-block;text-align:center;border-radius:8px}
.produit img{width:160px;height:160px;object-fit:cover}
input,select{width:95%;padding:14px;font-size:18px;margin-bottom:12px;border-radius:8px;border:none}
button{padding:12px;font-size:16px;background:#800000;color:white;border:none;border-radius:6px}
.ok{background:green;padding:12px;margin-top:12px;text-align:center;font-size:18px}
</style>
</head>

<body>

<header>
PAPASTA MARKET  
üõí <span id="panierCount">0</span>
</header>

<nav>
<button id="menuBtn">‚ò∞ MENU</button>
<div id="menu">
<button data-go="produits">Produits</button>
<button data-go="panier">Panier</button>
<button data-go="vendeur">Vendeur</button>
<button data-go="admin">Admin</button>
<button id="closeMenu">‚ùå Fermer</button>
</div>
</nav>

<section id="produits">
<h2>Produits</h2>
<input id="recherche" placeholder="Rechercher un produit">
<div id="listeProduits"></div>
</section>

<section id="panier">
<h2>üõí Panier</h2>

<div id="listePanier"></div>

<hr>

<p>Total produits : <b><span id="total">0</span> FG</b></p>
<p>Frais livraison : <b><span id="frais">0</span> FG</b></p>
<p><b>Total √† payer : <span id="grandTotal">0</span> FG</b></p>
</section>

<section id="vendeur">
<h2>Espace Vendeur</h2>
<input id="vNom" placeholder="Nom vendeur">
<input id="vNumero" placeholder="Num√©ro vendeur">
<input id="vPass" type="password" placeholder="Mot de passe">
<button id="connectVendeur">Connexion</button>

<div id="ajoutProduit" style="display:none">
<input id="pNom" placeholder="Nom produit">
<input id="pPrix" type="number" placeholder="Prix">
<input id="pImage" type="file">
<button id="ajouterProduit">Ajouter</button>
</div>
</section>

<section id="admin">
<h2>Admin</h2>
<input id="adminUser" placeholder="Utilisateur">
<input id="adminPass" type="password" placeholder="Mot de passe">
<button id="loginAdmin">Connexion</button>
<div id="adminCommandes"></div>
</section>

<script>
document.addEventListener("DOMContentLoaded",()=>{

const ADMIN_USER="papasta";
const ADMIN_PASS="papasta3494";

/* MENU */
menuBtn.onclick=()=>menu.style.display="block";
closeMenu.onclick=()=>menu.style.display="none";

document.querySelectorAll("[data-go]").forEach(b=>{
b.onclick=()=>{
document.querySelectorAll("section").forEach(s=>s.style.display="none");
document.getElementById(b.dataset.go).style.display="block";
menu.style.display="none";
};
});

/* DONN√âES */
let produits=JSON.parse(localStorage.getItem("produits"))||[];
let panier=[];

/* PRODUITS */
function afficherProduits(f=""){
listeProduits.innerHTML="";
produits.filter(p=>p.nom.toLowerCase().includes(f))
.forEach((p,i)=>{
listeProduits.innerHTML+=`
<div class="produit">
<img src="${p.image}">
<h4>${p.nom}</h4>
<p>${p.prix} FG</p>
<button onclick="ajouterPanier(${i})">Ajouter</button>
</div>`;
});
}

window.ajouterPanier=i=>{
panier.push(produits[i]);
afficherPanier();
};

/* PANIER + COMPTEUR */
function afficherPanier(){
listePanier.innerHTML="";
let total=0;

panier.forEach((p,i)=>{
total+=Number(p.prix);
listePanier.innerHTML+=`
${i+1}. ${p.nom} - ${p.prix} FG
<button onclick="panier.splice(${i},1);afficherPanier()">‚ùå</button><br>`;
});

document.getElementById("panierCount").innerText=panier.length;
document.getElementById("total").innerText=total;

let frais=total*0.1;
document.getElementById("frais").innerText=frais.toFixed(0);
document.getElementById("grandTotal").innerText=(total+frais).toFixed(0);
}

/* RECHERCHE */
recherche.onkeyup=()=>afficherProduits(recherche.value.toLowerCase());

/* VENDEUR */
function motDePasseValide(p){
return /^(?=.*[A-Za-z])(?=.*[0-9]).{6,}$/.test(p);
}

connectVendeur.onclick=()=>{
if(!motDePasseValide(vPass.value)) return alert("Mot de passe invalide");
ajoutProduit.style.display="block";
};

ajouterProduit.onclick=()=>{
const r=new FileReader();
r.onload=e=>{
produits.push({nom:pNom.value,prix:pPrix.value,image:e.target.result});
localStorage.setItem("produits",JSON.stringify(produits));
afficherProduits();
};
r.readAsDataURL(pImage.files[0]);
};

/* ADMIN */
loginAdmin.onclick=()=>{
if(adminUser.value===ADMIN_USER && adminPass.value===ADMIN_PASS){
adminCommandes.innerHTML="<div class='ok'>‚úÖ Connexion admin r√©ussie</div>";
}else alert("Identifiants incorrects");
};

/* INITIAL */
afficherProduits();
document.getElementById("produits").style.display="block";

});
</script>

</body>
  </html>
